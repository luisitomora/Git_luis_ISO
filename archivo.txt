#!/bin/bash

mostrar_menu() {
    clear
    echo "============================"
    echo "        Menú Principal       "
    echo "============================"
    echo "x - Extraer un archivo .tar"
    echo "a - Añadir todos los .txt a un archivo .tar"
    echo "c - Crear un .tar desde HOME"
    echo "v - Visualizar el contenido de un .tar"
    echo "m - Mostrar el menú nuevamente"
    echo "q - Salir"
    echo "============================"
}

# Mostrar el menú al inicio
mostrar_menu

while true; do
    read -p "Seleccione una opción: " OPCION

    case $OPCION in
        x)
            read -p "Ingrese el nombre del archivo .tar a extraer: " TARFILE
            if [ -f "$TARFILE" ]; then
                echo "Extrayendo $TARFILE..."
                tar -xf "$TARFILE"
            else
                echo "Archivo $TARFILE no encontrado."
            fi
            ;;

        a)
            read -p "Ingrese el nombre del archivo .tar donde añadir .txt: " TARFILE
            echo "Añadiendo todos los archivos .txt al tar $TARFILE..."
            find / -type f -name "*.txt" 2>/dev/null | xargs tar -rf "$TARFILE"
            ;;

        c)
            read -p "Ingrese el nombre del archivo .tar a crear: " TARFILE
            echo "Creando tar $TARFILE desde HOME..."
            tar -cf "$TARFILE" "$HOME"
            ;;

        v)
            read -p "Ingrese el nombre del archivo .tar a visualizar: " TARFILE
            if [ -f "$TARFILE" ]; then
                echo "Contenido del tar $TARFILE:"
                tar -tf "$TARFILE"
            else
                echo "Archivo $TARFILE no encontrado."
            fi
            ;;

        m)
            mostrar_menu
            ;;

        q)
            echo "Saliendo del script..."
            exit 0
            ;;

        *)
            echo "Opción inválida. Use x, a, c, v, m o q."
            ;;
    esac

    echo ""   # Línea en blanco para separar acciones
done
